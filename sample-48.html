<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>多语言切换</title>
	<style>
		p{padding:0 1em 0 1em;text-indent: 2em;}
		input{padding: 10px;
    background: #fff;
    border: none;
    cursor: pointer;
		margin: 1em;}
	</style>
<link href="css/main.css" rel="stylesheet" type="text/css">
<script src="js/jquery-3.1.1.min.js"></script>
<script src="js/48/jquery.cookie.js"></script>
</head>
<body>
<!--Copyright By Sunplace-->
<input class="trans" id="zhcn" type="button" value="中文">
<input class="trans" id="enus" type="button" value="English">
<center><h1 id="ts1"></h1></center>
<p id="ts2"></p>
<p id="ts3"></p>
<p id="ts4"></p>
<p id="ts5"></p>
<p id="ts6"></p>
<p id="ts7"></p>
<p id="ts8"></p>
<script>
$(function(){
	$(".trans").click(function(){
		var code = $(this).attr("id");		
		ajaxlang(code);
	});
});
	function ajaxlang(code){
		$.get("xml/48/"+code+".xml",function(xml){  
			$(xml).find("tcell").each(function(index,ele){
				fun(index,$(ele).text());
			});
		});  
		$.cookie('setlang',code);//更新cookie
	}
	function fun(nindex,nele){
		$("body *[id^=ts]").each(function(index,ele){
			if(index==nindex)
				{
					$(ele).text(nele);
					return;
				}
		});
	}
//初始化
	if($.cookie('setlang'))
		{
			//有cookie
			var langs = $.cookie('setlang');
			ajaxlang(langs);
		}
	else
		{
		var lang = navigator.language || navigator.userLanguage;
			switch(lang){
				case "en-US":ajaxlang("enus");break;
				case "zh-CN":ajaxlang("zhcn");break;
				default:ajaxlang("zhcn");break;
			}	
		}	
</script>
</body>
</html>